<!-- Create new territory -->

<%- partial('../partials/header') %>

<div class="container">
  <div class="page-header">
  	<%= i18n(actionResult) %>
  </div>

	<form class="form-horizontal" action="add" method="post" role="form">
	<fieldset>

		<div class="control-group">
		  <label class="control-label" for="input_letter"><%= i18n('Prefix Letter') %></label>
		  <div class="controls">
		    <select id="input_letter" name="input_letter" class="input-xlarge">
					<% _.each(availableLetters, function (i) { %>
						<% if(typeof lastLetter != 'undefined' && lastLetter == i) { %>
							<option value="<%= i %>" selected><%= i %></option>
						<% } else { %> 
							<option value="<%= i %>"><%= i %></option>
						<% } %>
					<% }) %>
		    </select>
		  </div>
		</div>
		<div class="control-group">
		  <label class="control-label" for="input_number"><%= i18n('Number') %></label>
		  <div class="controls">
		  	<% if(typeof lastNumber != 'undefined') { %>
		    	<input id="input_number" value="<%= (lastNumber+1) %>" name="input_number" type="number" min="1" placeholder="123" class="input-xlarge">
		    <% } else { %>
		    	<input id="input_number" name="input_number" type="number" min="1" placeholder="123" class="input-xlarge">
		    <% } %>
		  </div>
		</div>

		<div class="control-group">
		  <label class="control-label" for="input_type"><%= i18n('Type') %></label>
		  <div class="controls">
		    <select id="input_type" name="input_type" class="input-xlarge">
					<% _.each(sails.config.territory_types, function (i) { %>
						<option value="<%= i %>"><%= i18n(i) %></option>
					<% }) %>
		    </select>
		  </div>
		</div>

		<div class="control-group">
		  <label class="control-label" for="input_covered_date"><%= i18n('Covered') %></label>
		  <div class="controls">
		  	<% var today = new Date(); %>
		    <input id="input_covered_date" value="<%= today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate() %>" name="input_covered_date" type="date" placeholder="yyyy-mm-dd" class="input-xlarge">
		    <br><small><%= i18n('If the datepicker does not work, type the date in RFC3339 format: yyyy-mm-dd.') %></small>
		  </div>
		</div>

		<div class="control-group">
		  <label class="control-label" for="input_description"><%= i18n('Description') %></label>
		  <div class="controls">                     
		    <textarea class="field span4" rows="6" id="input_description" name="input_description" placeholder="<%= i18n('Address, etc.') %>"></textarea>
		  </div>
		</div>

		<div class="control-group">
			<label class="control-label" for="map_canvas"><%= i18n('Set Coordinates') %></label>
			<div class="controls">    
				<div id="map_canvas">
				</div>
				<div class="form-inline">
			    <label for="input_lat"><%= i18n('Latitude') %>:</label>
			    <% if(typeof lastLat != 'undefined') { %>
			    	<input class="form-control span2" name="input_lat" id="input_lat" type="text" value="<%= lastLat %>" />
			    <% } else { %>
			    	<input class="form-control span2" name="input_lat" id="input_lat" type="text" value="" />
			    <% } %>

			    <label for="input_lng"><%= i18n('Longitude') %>:</label>
			    <% if(typeof lastLng != 'undefined') { %>
			    	<input class="form-control span2" name="input_lng" id="input_lng" type="text" value="<%= lastLng %>" />
			    <% } else { %>
			    	<input class="form-control span2" name="input_lng" id="input_lng" type="text" value="" />
			    <% } %>
				</div>
			</div>
		</div>

		<div class="control-group">
			<div class="controls">  
				<button id="input_submit" type="submit" class="form-control btn btn-default">
				  <%= i18n('Create new territory') %>
				</button>
			</div>
		</div>
	</fieldset>
	</form>
</div>

<!-- Google Maps API v3 -->
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="/js/create_new_map.js"></script>

<%- partial('../partials/footer') %>
